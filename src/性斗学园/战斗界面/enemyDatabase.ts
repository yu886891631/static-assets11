/**
 * 敌人数据库 - 从世界书文件中提取的MVU变量数据
 * 此文件由脚本自动生成，请勿手动编辑
 */

export interface EnemyMvuData {
  对手等级: number; // 新增：敌人等级
  对手魅力: number;
  对手幸运: number;
  对手闪避率: number;
  对手暴击率: number;
  // 已移除：对手意志力
  对手耐力: number;
  对手最大耐力: number;
  对手快感: number;
  对手最大快感: number;
  对手高潮次数: number;
  对手性斗力: number;
  对手忍耐力: number;
  对手临时状态: Record<string, any>;
  对手技能冷却: Record<string, number>;
}

/**
 * 难度系数映射
 * 简单: 0.7, 普通: 1.0, 困难: 1.5, 抖M: 2.0, 作弊: 1
 */
export const DIFFICULTY_COEFFICIENTS: Record<string, number> = {
  简单: 0.7,
  普通: 1.0,
  困难: 1.5,
  抖M: 2.0,
  作弊: 1,
};

/**
 * 根据用户等级调整NPC等级下限
 * NPC最低等级 = max(原等级, 用户等级 - 8)
 * 每提升1级：魅力/幸运/闪避率/暴击率+1，最大耐力/最大快感+5，性斗力/忍耐力+10
 * @param baseData 基础敌人数据
 * @param userLevel 用户等级
 * @returns 调整后的敌人数据（等级提升后的基础数据）
 */
export function applyLevelScaling(baseData: EnemyMvuData, userLevel: number): EnemyMvuData {
  const minLevel = userLevel - 8;
  const originalLevel = baseData.对手等级;

  // 如果原等级已经高于等级下限，不需要调整
  if (originalLevel >= minLevel) {
    return { ...baseData };
  }

  // 计算需要提升的等级数
  const levelDiff = minLevel - originalLevel;

  return {
    对手等级: minLevel,
    对手魅力: baseData.对手魅力 + levelDiff,
    对手幸运: baseData.对手幸运 + levelDiff,
    对手闪避率: Math.min(60, baseData.对手闪避率 + levelDiff), // 闪避率上限60
    对手暴击率: Math.min(100, baseData.对手暴击率 + levelDiff), // 暴击率上限100
    对手耐力: baseData.对手耐力 + levelDiff * 5,
    对手最大耐力: baseData.对手最大耐力 + levelDiff * 5,
    对手快感: baseData.对手快感,
    对手最大快感: baseData.对手最大快感 + levelDiff * 5,
    对手高潮次数: baseData.对手高潮次数,
    对手性斗力: baseData.对手性斗力 + levelDiff * 10,
    对手忍耐力: baseData.对手忍耐力 + levelDiff * 10,
    对手临时状态: { ...baseData.对手临时状态 },
    对手技能冷却: { ...baseData.对手技能冷却 },
  };
}

/**
 * 根据难度系数调整敌人属性（在等级调整后应用）
 * @param baseData 基础敌人数据（已应用等级调整）
 * @param difficulty 难度名称
 * @returns 调整后的敌人数据
 */
export function applyDifficultyCoefficient(baseData: EnemyMvuData, difficulty: string): EnemyMvuData {
  const coefficient = DIFFICULTY_COEFFICIENTS[difficulty] || 1.0;

  if (coefficient === 1.0) {
    return { ...baseData };
  }

  return {
    对手等级: baseData.对手等级, // 等级不变
    对手魅力: Math.round(baseData.对手魅力 * coefficient),
    对手幸运: Math.round(baseData.对手幸运 * coefficient),
    对手闪避率: Math.min(60, Math.round(baseData.对手闪避率 * coefficient)), // 闪避率上限60
    对手暴击率: Math.min(100, Math.round(baseData.对手暴击率 * coefficient)), // 暴击率上限100
    对手耐力: Math.round(baseData.对手耐力 * coefficient),
    对手最大耐力: Math.round(baseData.对手最大耐力 * coefficient),
    对手快感: baseData.对手快感, // 快感不变
    对手最大快感: Math.round(baseData.对手最大快感 * coefficient),
    对手高潮次数: baseData.对手高潮次数, // 高潮次数不变
    对手性斗力: Math.round(baseData.对手性斗力 * coefficient),
    对手忍耐力: Math.round(baseData.对手忍耐力 * coefficient),
    对手临时状态: { ...baseData.对手临时状态 },
    对手技能冷却: { ...baseData.对手技能冷却 },
  };
}

/**
 * 敌人数据库 - 根据姓名查找MVU变量数据
 * 数据来源：世界书\性斗学园 目录中的人物条目
 */
export const ENEMY_DATABASE: Record<string, EnemyMvuData> = {
  爱丽丝温特: {
    对手魅力: 220,
    对手幸运: 110,
    对手闪避率: 35,
    对手暴击率: 52,
    对手等级: 99,
    对手耐力: 544,
    对手最大耐力: 544,
    对手快感: 0,
    对手最大快感: 624,
    对手高潮次数: 0,
    对手性斗力: 990,
    对手忍耐力: 990,
    对手临时状态: {},
    对手技能冷却: {},
  },
  上杉亚衣: {
    对手魅力: 20,
    对手幸运: 40,
    对手闪避率: 20,
    对手暴击率: 30,
    对手等级: 32,
    对手耐力: 152,
    对手最大耐力: 152,
    对手快感: 0,
    对手最大快感: 182,
    对手高潮次数: 0,
    对手性斗力: 272,
    对手忍耐力: 320,
    对手临时状态: {},
    对手技能冷却: {},
  },
  九条凛音: {
    对手魅力: 50,
    对手幸运: 50,
    对手闪避率: 30,
    对手暴击率: 35,
    对手等级: 45,
    对手耐力: 225,
    对手最大耐力: 225,
    对手快感: 0,
    对手最大快感: 256,
    对手高潮次数: 0,
    对手性斗力: 427,
    对手忍耐力: 450,
    对手临时状态: {},
    对手技能冷却: {},
  },
  白石响子: {
    对手魅力: 180,
    对手幸运: 80,
    对手闪避率: 25,
    对手暴击率: 55,
    对手等级: 85,
    对手耐力: 484,
    对手最大耐力: 484,
    对手快感: 0,
    对手最大快感: 607,
    对手高潮次数: 0,
    对手性斗力: 807,
    对手忍耐力: 850,
    对手临时状态: {},
    对手技能冷却: {},
  },
  神崎凛: {
    对手魅力: 80,
    对手幸运: 70,
    对手闪避率: 40,
    对手暴击率: 80,
    对手等级: 72,
    对手耐力: 378,
    对手最大耐力: 378,
    对手快感: 0,
    对手最大快感: 389,
    对手高潮次数: 0,
    对手性斗力: 648,
    对手忍耐力: 720,
    对手临时状态: {},
    对手技能冷却: {},
  },
  月下香: {
    对手魅力: 90,
    对手幸运: 80,
    对手闪避率: 20,
    对手暴击率: 30,
    对手等级: 60,
    对手耐力: 285,
    对手最大耐力: 285,
    对手快感: 0,
    对手最大快感: 378,
    对手高潮次数: 0,
    对手性斗力: 540,
    对手忍耐力: 600,
    对手临时状态: {},
    对手技能冷却: {},
  },
  天宫院抚子: {
    对手魅力: 56,
    对手幸运: 60,
    对手闪避率: 30,
    对手暴击率: 40,
    对手等级: 48,
    对手耐力: 240,
    对手最大耐力: 240,
    对手快感: 0,
    对手最大快感: 274,
    对手高潮次数: 0,
    对手性斗力: 475,
    对手忍耐力: 480,
    对手临时状态: {},
    对手技能冷却: {},
  },
  维多利亚戈德温: {
    对手魅力: 124,
    对手幸运: 100,
    对手闪避率: 25,
    对手暴击率: 40,
    对手等级: 73,
    对手耐力: 346,
    对手最大耐力: 346,
    对手快感: 0,
    对手最大快感: 526,
    对手高潮次数: 0,
    对手性斗力: 700,
    对手忍耐力: 730,
    对手临时状态: {},
    对手技能冷却: {},
  },
  艾丽卡施耐德: {
    对手魅力: 94,
    对手幸运: 70,
    对手闪避率: 45,
    对手暴击率: 23,
    对手等级: 65,
    对手耐力: 373,
    对手最大耐力: 373,
    对手快感: 0,
    对手最大快感: 332,
    对手高潮次数: 0,
    对手性斗力: 572,
    对手忍耐力: 650,
    对手临时状态: {},
    对手技能冷却: {},
  },
  艾琳海德: {
    对手魅力: 200,
    对手幸运: 100,
    对手闪避率: 30,
    对手暴击率: 75,
    对手等级: 95,
    对手耐力: 498,
    对手最大耐力: 498,
    对手快感: 0,
    对手最大快感: 570,
    对手高潮次数: 0,
    对手性斗力: 950,
    对手忍耐力: 950,
    对手临时状态: {},
    对手技能冷却: {},
  },
  莎拉斯通: {
    对手魅力: 133,
    对手幸运: 85,
    对手闪避率: 30,
    对手暴击率: 45,
    对手等级: 75,
    对手耐力: 375,
    对手最大耐力: 375,
    对手快感: 0,
    对手最大快感: 504,
    对手高潮次数: 0,
    对手性斗力: 712,
    对手忍耐力: 750,
    对手临时状态: {},
    对手技能冷却: {},
  },
  明日香: {
    对手魅力: 113,
    对手幸运: 100,
    对手闪避率: 50,
    对手暴击率: 77,
    对手等级: 88,
    对手耐力: 396,
    对手最大耐力: 396,
    对手快感: 0,
    对手最大快感: 634,
    对手高潮次数: 0,
    对手性斗力: 827,
    对手忍耐力: 880,
    对手临时状态: {},
    对手技能冷却: {},
  },
  绫濑川: {
    对手魅力: 191,
    对手幸运: 110,
    对手闪避率: 30,
    对手暴击率: 40,
    对手等级: 90,
    对手耐力: 513,
    对手最大耐力: 513,
    对手快感: 0,
    对手最大快感: 648,
    对手高潮次数: 0,
    对手性斗力: 882,
    对手忍耐力: 900,
    对手临时状态: {},
    对手技能冷却: {},
  },
  维纳斯: {
    对手魅力: 115,
    对手幸运: 78,
    对手闪避率: 50,
    对手暴击率: 75,
    对手等级: 78,
    对手耐力: 546,
    对手最大耐力: 546,
    对手快感: 0,
    对手最大快感: 421,
    对手高潮次数: 0,
    对手性斗力: 756,
    对手忍耐力: 780,
    对手临时状态: {},
    对手技能冷却: {},
  },
  索菲亚: {
    对手魅力: 124,
    对手幸运: 90,
    对手闪避率: 25,
    对手暴击率: 50,
    对手等级: 70,
    对手耐力: 420,
    对手最大耐力: 420,
    对手快感: 0,
    对手最大快感: 554,
    对手高潮次数: 0,
    对手性斗力: 693,
    对手忍耐力: 700,
    对手临时状态: {},
    对手技能冷却: {},
  },
  中岛诗织: {
    对手魅力: 102,
    对手幸运: 80,
    对手闪避率: 25,
    对手暴击率: 40,
    对手等级: 70,
    对手耐力: 332,
    对手最大耐力: 332,
    对手快感: 0,
    对手最大快感: 440,
    对手高潮次数: 0,
    对手性斗力: 609,
    对手忍耐力: 700,
    对手临时状态: {},
    对手技能冷却: {},
  },
  蝶: {
    对手魅力: 82,
    对手幸运: 80,
    对手闪避率: 25,
    对手暴击率: 35,
    对手等级: 70,
    对手耐力: 332,
    对手最大耐力: 332,
    对手快感: 0,
    对手最大快感: 504,
    对手高潮次数: 0,
    对手性斗力: 640,
    对手忍耐力: 700,
    对手临时状态: {},
    对手技能冷却: {},
  },
  雪: {
    对手魅力: 80,
    对手幸运: 70,
    对手闪避率: 30,
    对手暴击率: 40,
    对手等级: 60,
    对手耐力: 285,
    对手最大耐力: 285,
    对手快感: 0,
    对手最大快感: 378,
    对手高潮次数: 0,
    对手性斗力: 540,
    对手忍耐力: 600,
    对手临时状态: {},
    对手技能冷却: {},
  },
  风: {
    对手魅力: 34,
    对手幸运: 60,
    对手闪避率: 35,
    对手暴击率: 40,
    对手等级: 50,
    对手耐力: 237,
    对手最大耐力: 237,
    对手快感: 0,
    对手最大快感: 284,
    对手高潮次数: 0,
    对手性斗力: 425,
    对手忍耐力: 500,
    对手临时状态: {},
    对手技能冷却: {},
  },
  如月诗乃: {
    对手魅力: 72,
    对手幸运: 70,
    对手闪避率: 30,
    对手暴击率: 40,
    对手等级: 55,
    对手耐力: 261,
    对手最大耐力: 261,
    对手快感: 0,
    对手最大快感: 296,
    对手高潮次数: 0,
    对手性斗力: 522,
    对手忍耐力: 550,
    对手临时状态: {},
    对手技能冷却: {},
  },
  森莉花: {
    对手魅力: 63,
    对手幸运: 70,
    对手闪避率: 30,
    对手暴击率: 40,
    对手等级: 52,
    对手耐力: 247,
    对手最大耐力: 247,
    对手快感: 0,
    对手最大快感: 328,
    对手高潮次数: 0,
    对手性斗力: 499,
    对手忍耐力: 520,
    对手临时状态: {},
    对手技能冷却: {},
  },
  阿米莉亚安斯华斯: {
    对手魅力: 24,
    对手幸运: 40,
    对手闪避率: 20,
    对手暴击率: 30,
    对手等级: 30,
    对手耐力: 135,
    对手最大耐力: 135,
    对手快感: 0,
    对手最大快感: 154,
    对手高潮次数: 0,
    对手性斗力: 279,
    对手忍耐力: 300,
    对手临时状态: {},
    对手技能冷却: {},
  },
  樱井结衣: {
    对手魅力: 34,
    对手幸运: 30,
    对手闪避率: 15,
    对手暴击率: 20,
    对手等级: 28,
    对手耐力: 126,
    对手最大耐力: 126,
    对手快感: 0,
    对手最大快感: 176,
    对手高潮次数: 0,
    对手性斗力: 246,
    对手忍耐力: 280,
    对手临时状态: {},
    对手技能冷却: {},
  },
  安琪: {
    对手魅力: 86,
    对手幸运: 80,
    对手闪避率: 45,
    对手暴击率: 50,
    对手等级: 69,
    对手耐力: 345,
    对手最大耐力: 345,
    对手快感: 0,
    对手最大快感: 392,
    对手高潮次数: 0,
    对手性斗力: 635,
    对手忍耐力: 690,
    对手临时状态: {},
    对手技能冷却: {},
  },
  美咲绫: {
    对手魅力: 119,
    对手幸运: 90,
    对手闪避率: 30,
    对手暴击率: 40,
    对手等级: 68,
    对手耐力: 323,
    对手最大耐力: 323,
    对手快感: 0,
    对手最大快感: 428,
    对手高潮次数: 0,
    对手性斗力: 666,
    对手忍耐力: 680,
    对手临时状态: {},
    对手技能冷却: {},
  },
  角楯花凛: {
    对手魅力: 118,
    对手幸运: 85,
    对手闪避率: 30,
    对手暴击率: 45,
    对手等级: 75,
    对手耐力: 375,
    对手最大耐力: 375,
    对手快感: 0,
    对手最大快感: 472,
    对手高潮次数: 0,
    对手性斗力: 682,
    对手忍耐力: 750,
    对手临时状态: {},
    对手技能冷却: {},
  },
  索亚伊万诺娃: {
    对手魅力: 18,
    对手幸运: 60,
    对手闪避率: 45,
    对手暴击率: 50,
    对手等级: 46,
    对手耐力: 264,
    对手最大耐力: 264,
    对手快感: 0,
    对手最大快感: 235,
    对手高潮次数: 0,
    对手性斗力: 446,
    对手忍耐力: 460,
    对手临时状态: {},
    对手技能冷却: {},
  },
  凰天羽: {
    对手魅力: 12,
    对手幸运: 60,
    对手闪避率: 50,
    对手暴击率: 45,
    对手等级: 45,
    对手耐力: 225,
    对手最大耐力: 225,
    对手快感: 0,
    对手最大快感: 283,
    对手高潮次数: 0,
    对手性斗力: 432,
    对手忍耐力: 450,
    对手临时状态: {},
    对手技能冷却: {},
  },
  赤城朱音: {
    对手魅力: 20,
    对手幸运: 40,
    对手闪避率: 40,
    对手暴击率: 30,
    对手等级: 40,
    对手耐力: 230,
    对手最大耐力: 230,
    对手快感: 0,
    对手最大快感: 205,
    对手高潮次数: 0,
    对手性斗力: 364,
    对手忍耐力: 400,
    对手临时状态: {},
    对手技能冷却: {},
  },
  蓝原结衣: {
    对手魅力: 40,
    对手幸运: 35,
    对手闪避率: 25,
    对手暴击率: 30,
    对手等级: 38,
    对手耐力: 180,
    对手最大耐力: 180,
    对手快感: 0,
    对手最大快感: 239,
    对手高潮次数: 0,
    对手性斗力: 349,
    对手忍耐力: 380,
    对手临时状态: {},
    对手技能冷却: {},
  },
  橘美玲: {
    对手魅力: 47,
    对手幸运: 40,
    对手闪避率: 25,
    对手暴击率: 30,
    对手等级: 40,
    对手耐力: 190,
    对手最大耐力: 190,
    对手快感: 0,
    对手最大快感: 228,
    对手高潮次数: 0,
    对手性斗力: 368,
    对手忍耐力: 400,
    对手临时状态: {},
    对手技能冷却: {},
  },
  克里奥佩特拉七世: {
    对手魅力: 51,
    对手幸运: 35,
    对手闪避率: 25,
    对手暴击率: 25,
    对手等级: 37,
    对手耐力: 175,
    对手最大耐力: 175,
    对手快感: 0,
    对手最大快感: 266,
    对手高潮次数: 0,
    对手性斗力: 344,
    对手忍耐力: 370,
    对手临时状态: {},
    对手技能冷却: {},
  },
  星野光: {
    对手魅力: 33,
    对手幸运: 30,
    对手闪避率: 20,
    对手暴击率: 25,
    对手等级: 30,
    对手耐力: 142,
    对手最大耐力: 142,
    对手快感: 0,
    对手最大快感: 188,
    对手高潮次数: 0,
    对手性斗力: 267,
    对手忍耐力: 300,
    对手临时状态: {},
    对手技能冷却: {},
  },
  望月静: {
    对手魅力: 45,
    对手幸运: 60,
    对手闪避率: 28,
    对手暴击率: 42,
    对手等级: 38,
    对手耐力: 180,
    对手最大耐力: 180,
    对手快感: 0,
    对手最大快感: 228,
    对手高潮次数: 0,
    对手性斗力: 342,
    对手忍耐力: 380,
    对手临时状态: {},
    对手技能冷却: {},
  },
  早坂蕾娜: {
    对手魅力: 33,
    对手幸运: 40,
    对手闪避率: 25,
    对手暴击率: 30,
    对手等级: 36,
    对手耐力: 171,
    对手最大耐力: 171,
    对手快感: 0,
    对手最大快感: 227,
    对手高潮次数: 0,
    对手性斗力: 327,
    对手忍耐力: 360,
    对手临时状态: {},
    对手技能冷却: {},
  },
  伊尼亚德瓦卢瓦: {
    对手魅力: 16,
    对手幸运: 40,
    对手闪避率: 30,
    对手暴击率: 35,
    对手等级: 33,
    对手耐力: 165,
    对手最大耐力: 165,
    对手快感: 0,
    对手最大快感: 208,
    对手高潮次数: 0,
    对手性斗力: 310,
    对手忍耐力: 330,
    对手临时状态: {},
    对手技能冷却: {},
  },
  娜拉: {
    对手魅力: 70,
    对手幸运: 55,
    对手闪避率: 32,
    对手暴击率: 38,
    对手等级: 27,
    对手耐力: 135,
    对手最大耐力: 135,
    对手快感: 0,
    对手最大快感: 162,
    对手高潮次数: 0,
    对手性斗力: 245,
    对手忍耐力: 270,
    对手临时状态: {},
    对手技能冷却: {},
  },
  小鸟游雏子: {
    对手魅力: 25,
    对手幸运: 25,
    对手闪避率: 15,
    对手暴击率: 20,
    对手等级: 22,
    对手耐力: 88,
    对手最大耐力: 88,
    对手快感: 0,
    对手最大快感: 101,
    对手高潮次数: 0,
    对手性斗力: 211,
    对手忍耐力: 220,
    对手临时状态: {},
    对手技能冷却: {},
  },
  猫宫宁宁: {
    对手魅力: 28,
    对手幸运: 20,
    对手闪避率: 15,
    对手暴击率: 20,
    对手等级: 20,
    对手耐力: 85,
    对手最大耐力: 85,
    对手快感: 0,
    对手最大快感: 108,
    对手高潮次数: 0,
    对手性斗力: 196,
    对手忍耐力: 200,
    对手临时状态: {},
    对手技能冷却: {},
  },
  犬饲真子: {
    对手魅力: 8,
    对手幸运: 20,
    对手闪避率: 15,
    对手暴击率: 18,
    对手等级: 18,
    对手耐力: 94,
    对手最大耐力: 94,
    对手快感: 0,
    对手最大快感: 92,
    对手高潮次数: 0,
    对手性斗力: 153,
    对手忍耐力: 180,
    对手临时状态: {},
    对手技能冷却: {},
  },
  娜塔莎斯迈尔: {
    对手魅力: 15,
    对手幸运: 25,
    对手闪避率: 20,
    对手暴击率: 25,
    对手等级: 24,
    对手耐力: 114,
    对手最大耐力: 114,
    对手快感: 0,
    对手最大快感: 151,
    对手高潮次数: 0,
    对手性斗力: 220,
    对手忍耐力: 240,
    对手临时状态: {},
    对手技能冷却: {},
  },
  铃木惠美: {
    对手魅力: 5,
    对手幸运: 10,
    对手闪避率: 10,
    对手暴击率: 11,
    对手等级: 15,
    对手耐力: 63,
    对手最大耐力: 63,
    对手快感: 0,
    对手最大快感: 80,
    对手高潮次数: 0,
    对手性斗力: 82,
    对手忍耐力: 150,
    对手临时状态: {},
    对手技能冷却: {},
  },
  雪莉克里姆希尔德: {
    对手魅力: 50,
    对手幸运: 55,
    对手闪避率: 40,
    对手暴击率: 34,
    对手等级: 50,
    对手耐力: 250,
    对手最大耐力: 250,
    对手快感: 0,
    对手最大快感: 314,
    对手高潮次数: 0,
    对手性斗力: 445,
    对手忍耐力: 500,
    对手临时状态: {},
    对手技能冷却: {},
  },
  白川千夏: {
    对手魅力: 30,
    对手幸运: 40,
    对手闪避率: 35,
    对手暴击率: 33,
    对手等级: 40,
    对手耐力: 200,
    对手最大耐力: 200,
    对手快感: 0,
    对手最大快感: 228,
    对手高潮次数: 0,
    对手性斗力: 352,
    对手忍耐力: 400,
    对手临时状态: {},
    对手技能冷却: {},
  },
  黑塔小姐: {
    对手魅力: 42,
    对手幸运: 50,
    对手闪避率: 30,
    对手暴击率: 25,
    对手等级: 45,
    对手耐力: 213,
    对手最大耐力: 213,
    对手快感: 0,
    对手最大快感: 242,
    对手高潮次数: 0,
    对手性斗力: 369,
    对手忍耐力: 450,
    对手临时状态: {},
    对手技能冷却: {},
  },
  月城遥: {
    对手魅力: 59,
    对手幸运: 70,
    对手闪避率: 35,
    对手暴击率: 40,
    对手等级: 68,
    对手耐力: 261,
    对手最大耐力: 261,
    对手快感: 0,
    对手最大快感: 296,
    对手高潮次数: 0,
    对手性斗力: 469,
    对手忍耐力: 550,
    对手临时状态: {},
    对手技能冷却: {},
  },
  零: {
    对手魅力: 61,
    对手幸运: 60,
    对手闪避率: 40,
    对手暴击率: 35,
    对手等级: 60,
    对手耐力: 285,
    对手最大耐力: 285,
    对手快感: 0,
    对手最大快感: 378,
    对手高潮次数: 0,
    对手性斗力: 492,
    对手忍耐力: 600,
    对手临时状态: {},
    对手技能冷却: {},
  },
  桃乃爱: {
    对手魅力: 27,
    对手幸运: 50,
    对手闪避率: 35,
    对手暴击率: 40,
    对手等级: 30,
    对手耐力: 190,
    对手最大耐力: 190,
    对手快感: 0,
    对手最大快感: 288,
    对手高潮次数: 0,
    对手性斗力: 370,
    对手忍耐力: 400,
    对手临时状态: {},
    对手技能冷却: {},
  },
  加藤鹰: {
    对手魅力: 137,
    对手幸运: 120,
    对手闪避率: 60,
    对手暴击率: 100,
    对手等级: 99,
    对手耐力: 504,
    对手最大耐力: 504,
    对手快感: 0,
    对手最大快感: 856,
    对手高潮次数: 0,
    对手性斗力: 990,
    对手忍耐力: 990,
    对手临时状态: {},
    对手技能冷却: {},
  },
  佐藤健: {
    对手魅力: 89,
    对手幸运: 72,
    对手闪避率: 30,
    对手暴击率: 35,
    对手等级: 60,
    对手耐力: 390,
    对手最大耐力: 390,
    对手快感: 0,
    对手最大快感: 374,
    对手高潮次数: 0,
    对手性斗力: 552,
    对手忍耐力: 650,
    对手临时状态: {},
    对手技能冷却: {},
  },
  田中勇: {
    对手魅力: 9,
    对手幸运: 40,
    对手闪避率: 25,
    对手暴击率: 10,
    对手等级: 30,
    对手耐力: 166,
    对手最大耐力: 166,
    对手快感: 0,
    对手最大快感: 188,
    对手高潮次数: 0,
    对手性斗力: 227,
    对手忍耐力: 350,
    对手临时状态: {},
    对手技能冷却: {},
  },
  李强: {
    对手魅力: 4,
    对手幸运: 35,
    对手闪避率: 20,
    对手暴击率: 5,
    对手等级: 25,
    对手耐力: 135,
    对手最大耐力: 135,
    对手快感: 0,
    对手最大快感: 154,
    对手高潮次数: 0,
    对手性斗力: 180,
    对手忍耐力: 300,
    对手临时状态: {},
    对手技能冷却: {},
  },
  风音: {
    对手魅力: 93,
    对手幸运: 90,
    对手闪避率: 50,
    对手暴击率: 55,
    对手等级: 75,
    对手耐力: 375,
    对手最大耐力: 375,
    对手快感: 0,
    对手最大快感: 427,
    对手高潮次数: 0,
    对手性斗力: 712,
    对手忍耐力: 750,
    对手临时状态: {},
    对手技能冷却: {},
  },
  铃音: {
    对手魅力: 86,
    对手幸运: 85,
    对手闪避率: 45,
    对手暴击率: 50,
    对手等级: 72,
    对手耐力: 360,
    对手最大耐力: 360,
    对手快感: 0,
    对手最大快感: 410,
    对手高潮次数: 0,
    对手性斗力: 662,
    对手忍耐力: 720,
    对手临时状态: {},
    对手技能冷却: {},
  },
  山田花子: {
    对手魅力: 81,
    对手幸运: 90,
    对手闪避率: 50,
    对手暴击率: 60,
    对手等级: 75,
    对手耐力: 405,
    对手最大耐力: 405,
    对手快感: 0,
    对手最大快感: 432,
    对手高潮次数: 0,
    对手性斗力: 699,
    对手忍耐力: 750,
    对手临时状态: {},
    对手技能冷却: {},
  },
  佐藤幸子: {
    对手魅力: 5,
    对手幸运: 10,
    对手闪避率: 10,
    对手暴击率: 11,
    对手等级: 10,
    对手耐力: 40,
    对手最大耐力: 40,
    对手快感: 0,
    对手最大快感: 50,
    对手高潮次数: 0,
    对手性斗力: 75,
    对手忍耐力: 100,
    对手临时状态: {},
    对手技能冷却: {},
  },
  莉莉安: {
    对手魅力: 165,
    对手幸运: 90,
    对手闪避率: 45,
    对手暴击率: 55,
    对手等级: 68,
    对手耐力: 476,
    对手最大耐力: 476,
    对手快感: 0,
    对手最大快感: 612,
    对手高潮次数: 0,
    对手性斗力: 612,
    对手忍耐力: 612,
    对手临时状态: {},
    对手技能冷却: {},
  },
  伊丽莎白夜羽: {
    对手魅力: 152,
    对手幸运: 95,
    对手闪避率: 50,
    对手暴击率: 60,
    对手等级: 80,
    对手耐力: 560,
    对手最大耐力: 560,
    对手快感: 0,
    对手最大快感: 752,
    对手高潮次数: 0,
    对手性斗力: 752,
    对手忍耐力: 752,
    对手临时状态: {},
    对手技能冷却: {},
  },
  克劳迪娅威斯特: {
    对手魅力: 165,
    对手幸运: 100,
    对手闪避率: 35,
    对手暴击率: 62,
    对手等级: 82,
    对手耐力: 468,
    对手最大耐力: 468,
    对手快感: 0,
    对手最大快感: 615,
    对手高潮次数: 0,
    对手性斗力: 825,
    对手忍耐力: 820,
    对手临时状态: {},
    对手技能冷却: {},
  },
  安娜科兹洛娃: {
    对手魅力: 178,
    对手幸运: 85,
    对手闪避率: 50,
    对手暴击率: 55,
    对手等级: 70,
    对手耐力: 476,
    对手最大耐力: 476,
    对手快感: 0,
    对手最大快感: 632,
    对手高潮次数: 0,
    对手性斗力: 632,
    对手忍耐力: 632,
    对手临时状态: {},
    对手技能冷却: {},
  },
  弗洛拉梅斯梅尔: {
    对手魅力: 167,
    对手幸运: 100,
    对手闪避率: 48,
    对手暴击率: 58,
    对手等级: 78,
    对手耐力: 525,
    对手最大耐力: 525,
    对手快感: 0,
    对手最大快感: 735,
    对手高潮次数: 0,
    对手性斗力: 735,
    对手忍耐力: 735,
    对手临时状态: {},
    对手技能冷却: {},
  },
  布伦希尔德: {
    对手魅力: 160,
    对手幸运: 95,
    对手闪避率: 30,
    对手暴击率: 58,
    对手等级: 80,
    对手耐力: 456,
    对手最大耐力: 456,
    对手快感: 0,
    对手最大快感: 585,
    对手高潮次数: 0,
    对手性斗力: 780,
    对手忍耐力: 800,
    对手临时状态: {},
    对手技能冷却: {},
  },
  伊甸阿斯莫德: {
    对手魅力: 200,
    对手幸运: 150,
    对手闪避率: 60,
    对手暴击率: 100,
    对手等级: 99,
    对手耐力: 900,
    对手最大耐力: 900,
    对手快感: 0,
    对手最大快感: 999,
    对手高潮次数: 0,
    对手性斗力: 999,
    对手忍耐力: 999,
    对手临时状态: {},
    对手技能冷却: {},
  },
  李小云: {
    对手魅力: 148,
    对手幸运: 75,
    对手闪避率: 45,
    对手暴击率: 50,
    对手等级: 75,
    对手耐力: 434,
    对手最大耐力: 434,
    对手快感: 0,
    对手最大快感: 564,
    对手高潮次数: 0,
    对手性斗力: 564,
    对手忍耐力: 564,
    对手临时状态: {},
    对手技能冷却: {},
  },
  樱岛麻衣: {
    对手魅力: 167,
    对手幸运: 95,
    对手闪避率: 48,
    对手暴击率: 56,
    对手等级: 70,
    对手耐力: 525,
    对手最大耐力: 525,
    对手快感: 0,
    对手最大快感: 697,
    对手高潮次数: 0,
    对手性斗力: 697,
    对手忍耐力: 697,
    对手临时状态: {},
    对手技能冷却: {},
  },
  潘多拉小姐: {
    对手魅力: 168,
    对手幸运: 110,
    对手闪避率: 52,
    对手暴击率: 62,
    对手等级: 78,
    对手耐力: 546,
    对手最大耐力: 546,
    对手快感: 0,
    对手最大快感: 772,
    对手高潮次数: 0,
    对手性斗力: 772,
    对手忍耐力: 772,
    对手临时状态: {},
    对手技能冷却: {},
  },
  艾米丽威廉姆斯: {
    对手魅力: 165,
    对手幸运: 88,
    对手闪避率: 46,
    对手暴击率: 54,
    对手等级: 70,
    对手耐力: 490,
    对手最大耐力: 490,
    对手快感: 0,
    对手最大快感: 644,
    对手高潮次数: 0,
    对手性斗力: 644,
    对手忍耐力: 644,
    对手临时状态: {},
    对手技能冷却: {},
  },
  '赤城 朱音': {
    对手魅力: 160,
    对手幸运: 70,
    对手闪避率: 40,
    对手暴击率: 48,
    对手等级: 40,
    对手耐力: 280,
    对手最大耐力: 280,
    对手快感: 0,
    对手最大快感: 364,
    对手高潮次数: 0,
    对手性斗力: 364,
    对手忍耐力: 364,
    对手临时状态: {},
    对手技能冷却: {},
  },
  赵婷婷: {
    对手魅力: 180,
    对手幸运: 80,
    对手闪避率: 45,
    对手暴击率: 52,
    对手等级: 50,
    对手耐力: 455,
    对手最大耐力: 455,
    对手快感: 0,
    对手最大快感: 585,
    对手高潮次数: 0,
    对手性斗力: 585,
    对手忍耐力: 585,
    对手临时状态: {},
    对手技能冷却: {},
  },
  辣妹子阳菜: {
    对手魅力: 162,
    对手幸运: 65,
    对手闪避率: 38,
    对手暴击率: 45,
    对手等级: 50,
    对手耐力: 245,
    对手最大耐力: 245,
    对手快感: 0,
    对手最大快感: 311,
    对手高潮次数: 0,
    对手性斗力: 311,
    对手忍耐力: 311,
    对手临时状态: {},
    对手技能冷却: {},
  },
  露娜拉克缇丝: {
    对手魅力: 175,
    对手幸运: 115,
    对手闪避率: 55,
    对手暴击率: 68,
    对手等级: 85,
    对手耐力: 595,
    对手最大耐力: 595,
    对手快感: 0,
    对手最大快感: 824,
    对手高潮次数: 0,
    对手性斗力: 824,
    对手忍耐力: 824,
    对手临时状态: {},
    对手技能冷却: {},
  },
  // ==================== 沐芯兰 BOSS 三阶段 ====================
  // 第一阶段：代行机体·茉莉（伪装形态）- 嚣张的雌小鬼傀儡
  沐芯兰_1: {
    对手等级: 50,
    对手魅力: 60,
    对手幸运: 80,
    对手闪避率: 55, // 高闪避，嚣张闪避流
    对手暴击率: 25,
    对手耐力: 200,
    对手最大耐力: 200,
    对手快感: 0,
    对手最大快感: 200,
    对手高潮次数: 0, // 初始为0，记录已高潮次数
    对手性斗力: 380,
    对手忍耐力: 350,
    对手临时状态: {},
    对手技能冷却: {},
  },
  // 第二阶段：完全同步·祸星茉莉（暴力女王形态）
  沐芯兰_2: {
    对手等级: 88,
    对手魅力: 150,
    对手幸运: 200,
    对手闪避率: 20, // 放弃闪避，改用压倒性力量
    对手暴击率: 80,
    对手耐力: 500,
    对手最大耐力: 500,
    对手快感: 0,
    对手最大快感: 512,
    对手高潮次数: 0, // 初始为0，记录已高潮次数
    对手性斗力: 880,
    对手忍耐力: 800,
    对手临时状态: {},
    对手技能冷却: {},
  },
  // 第三阶段：真身露出·沐芯兰（羸弱的傲娇女王）
  沐芯兰_3: {
    对手等级: 11,
    对手魅力: 200, // 真身魅力极高（傲娇属性）
    对手幸运: 30,
    对手闪避率: 5, // 极度虚弱
    对手暴击率: 5,
    对手耐力: 50,
    对手最大耐力: 50,
    对手快感: 0,
    对手最大快感: 80,
    对手高潮次数: 0,
    对手性斗力: 88,
    对手忍耐力: 66,
    对手临时状态: {},
    对手技能冷却: {},
  },
  // ==================== 伊甸芙宁（学院长之女）====================
  伊甸芙宁: {
    对手等级: 99,
    对手魅力: 300, // 完美基因，极高魅力
    对手幸运: 300, // 学院最高权限者，运气爆表
    对手闪避率: 45,
    对手暴击率: 60,
    对手耐力: 999,
    对手最大耐力: 999,
    对手快感: 0,
    对手最大快感: 999,
    对手高潮次数: 0,
    对手性斗力: 999, // 取决于她想不想玩
    对手忍耐力: 999,
    对手临时状态: {},
    对手技能冷却: {},
  },
  // ==================== 克莉丝汀 BOSS 双阶段 ====================
  // 第一阶段：表人格（常态/弱气防守）- 柔弱社恐，极力避免战斗
  克莉丝汀_1: {
    对手等级: 55,
    对手魅力: 120,
    对手幸运: 80,
    对手闪避率: 35, // 较高闪避，弱气躲避
    对手暴击率: 20,
    对手耐力: 280,
    对手最大耐力: 280,
    对手快感: 0,
    对手最大快感: 320,
    对手高潮次数: 0,
    对手性斗力: 544,
    对手忍耐力: 500,
    对手临时状态: {},
    对手技能冷却: {},
  },
  // 第二阶段：里人格（女王觉醒）- 绝对理性的秩序维护者，抖S女王
  克莉丝汀_2: {
    对手等级: 88,
    对手魅力: 200,
    对手幸运: 150,
    对手闪避率: 25, // 女王不屑于躲避
    对手暴击率: 65,
    对手耐力: 500,
    对手最大耐力: 500,
    对手快感: 0,
    对手最大快感: 528,
    对手高潮次数: 0,
    对手性斗力: 871,
    对手忍耐力: 850,
    对手临时状态: {},
    对手技能冷却: {},
  },
  // ==================== 艾格妮丝（鼠族公主）====================
  艾格妮丝: {
    对手等级: 42,
    对手魅力: 100,
    对手幸运: 120, // 鼠族的敏捷与运气
    对手闪避率: 50, // 极高敏捷
    对手暴击率: 35,
    对手耐力: 200,
    对手最大耐力: 200,
    对手快感: 0,
    对手最大快感: 252,
    对手高潮次数: 0,
    对手性斗力: 403,
    对手忍耐力: 380,
    对手临时状态: {},
    对手技能冷却: {},
  },
  // 注意：如需添加更多人物，请按照以下格式添加：
  // '人物姓名': {
  //   对手魅力: 数值,
  //   对手幸运: 数值,
  //   对手闪避率: 数值,
  //   对手暴击率: 数值,
  //   对手意志力: 数值,
  //   对手耐力: 数值,
  //   对手最大耐力: 数值,
  //   对手快感: 0,
  //   对手最大快感: 数值,
  //   对手高潮次数: 0,
  //   对手性斗力: 数值,
  //   对手忍耐力: 数值,
  //   对手临时状态: {},
  //   对手技能冷却: {},
  // },
};

/**
 * 角色名称别名映射
 * 用于支持模糊匹配，长名字拆分成多个部分
 */
export const NAME_ALIASES: Record<string, string> = {
  // 4字及以上名字拆分
  雪莉: '雪莉克里姆希尔德',
  克里姆: '雪莉克里姆希尔德',
  希尔德: '雪莉克里姆希尔德',
  爱丽丝: '爱丽丝温特',
  温特: '爱丽丝温特',
  伊丽莎白: '伊丽莎白夜羽',
  夜羽: '伊丽莎白夜羽',
  克劳迪娅: '克劳迪娅威斯特',
  威斯特: '克劳迪娅威斯特',
  克里奥: '克里奥佩特拉七世',
  佩特拉: '克里奥佩特拉七世',
  七世: '克里奥佩特拉七世',
  娜塔莎: '娜塔莎斯迈尔',
  斯迈尔: '娜塔莎斯迈尔',
  安娜: '安娜科兹洛娃',
  科兹洛娃: '安娜科兹洛娃',
  弗洛拉: '弗洛拉梅斯梅尔',
  梅斯梅尔: '弗洛拉梅斯梅尔',
  布伦: '布伦希尔德',
  布伦希尔德: '布伦希尔德',
  女武神: '布伦希尔德',
  中岛: '中岛诗织',
  诗织: '中岛诗织',
  九条: '九条凛音',
  凛音: '九条凛音',
  伊尼亚: '伊尼亚德瓦卢瓦',
  德瓦卢瓦: '伊尼亚德瓦卢瓦',
  伊甸: '伊甸阿斯莫德',
  阿斯莫德: '伊甸阿斯莫德',
  佐藤健: '佐藤健',
  佐藤幸子: '佐藤幸子',
  凰天羽: '凰天羽',
  天羽: '凰天羽',
  加藤: '加藤鹰',
  加藤鹰: '加藤鹰',
  天宫院: '天宫院抚子',
  抚子: '天宫院抚子',
  小鸟游: '小鸟游雏子',
  雏子: '小鸟游雏子',
  早坂: '早坂蕾娜',
  蕾娜: '早坂蕾娜',
  星野: '星野光',
  星野光: '星野光',
  月下: '月下香',
  月下香: '月下香',
  月城: '月城遥',
  月城遥: '月城遥',
  望月: '望月静',
  望月静: '望月静',
  李小云: '李小云',
  李强: '李强',
  桃乃: '桃乃爱',
  桃乃爱: '桃乃爱',
  樱井: '樱井结衣',
  结衣: '樱井结衣',
  樱岛: '樱岛麻衣',
  麻衣: '樱岛麻衣',
  橘美玲: '橘美玲',
  潘多拉: '潘多拉小姐',
  犬饲: '犬饲真子',
  真子: '犬饲真子',
  猫宫: '猫宫宁宁',
  宁宁: '猫宫宁宁',
  白川: '白川千夏',
  千夏: '白川千夏',
  白石: '白石响子',
  响子: '白石响子',
  神崎: '神崎凛',
  神崎凛: '神崎凛',
  索亚: '索亚伊万诺娃',
  伊万诺娃: '索亚伊万诺娃',
  索菲亚: '索菲亚',
  绫濑川: '绫濑川',
  维多利亚: '维多利亚戈德温',
  戈德温: '维多利亚戈德温',
  维纳斯: '维纳斯',
  美咲: '美咲绫',
  美咲绫: '美咲绫',
  艾丽卡: '艾丽卡施耐德',
  施耐德: '艾丽卡施耐德',
  艾米丽: '艾米丽威廉姆斯',
  威廉姆斯: '艾米丽威廉姆斯',
  莉莉安: '莉莉安',
  莎拉: '莎拉斯通',
  斯通: '莎拉斯通',
  蓝原: '蓝原结衣',
  蝶: '蝶',
  角楯: '角楯花凛',
  花凛: '角楯花凛',
  赤城: '赤城朱音',
  朱音: '赤城朱音',
  赵婷婷: '赵婷婷',
  辣妹子: '辣妹子阳菜',
  阳菜: '辣妹子阳菜',
  铃木: '铃木惠美',
  惠美: '铃木惠美',
  铃音: '铃音',
  灵音: '铃音',
  阿米莉亚: '阿米莉亚安斯华斯',
  安斯华斯: '阿米莉亚安斯华斯',
  雪: '雪',
  零: '零',
  露娜: '露娜拉克缇丝',
  拉克缇丝: '露娜拉克缇丝',
  风: '风',
  风音: '风音',
  黑塔: '黑塔小姐',
  上杉: '上杉亚衣',
  亚衣: '上杉亚衣',
  安琪: '安琪',
  // 沐芯兰 BOSS 别名
  茉莉: '沐芯兰_1',
  沐芯兰: '沐芯兰_1',
  '茉莉(?)': '沐芯兰_1',
  祸星茉莉: '沐芯兰_2',
  '꧁༺茉莉༻꧂': '沐芯兰_2',
  '沐芯兰（真身）': '沐芯兰_3',
  // 新增人物别名
  芙宁: '伊甸芙宁',
  伊甸芙宁: '伊甸芙宁',
  // 克莉丝汀 BOSS 别名
  克莉丝汀: '克莉丝汀_1',
  书记: '克莉丝汀_1',
  '克莉丝汀(?)': '克莉丝汀_1',
  女王克莉丝汀: '克莉丝汀_2',
  处刑人克莉丝汀: '克莉丝汀_2',
  艾格妮丝: '艾格妮丝',
  鼠族公主: '艾格妮丝',
  赤蔷薇: '艾格妮丝',
  山田花子: '山田花子',
  西园寺辉夜: '山田花子',
};

/**
 * 根据对手名称获取MVU变量数据（支持包含匹配）
 * @param enemyName 对手名称（可以是全名、部分名称或包含多个角色的复合名称）
 * @returns MVU变量数据，如果不存在则返回null
 */
export function getEnemyMvuData(enemyName: string): EnemyMvuData | null {
  // 1. 先尝试精确匹配（对手名刚好是某个数据库全名）
  if (enemyName in ENEMY_DATABASE) {
    return ENEMY_DATABASE[enemyName];
  }

  // 2. 先尝试精确别名匹配（避免短名包含匹配误判，如“雪莉”误命中“雪”）
  if (enemyName in NAME_ALIASES) {
    const fullName = NAME_ALIASES[enemyName];
    if (fullName in ENEMY_DATABASE) {
      return ENEMY_DATABASE[fullName];
    }
  }

  // 3. 尝试包含匹配：遍历数据库全名，如果对手名包含某个全名，返回该数据
  //    如果包含多个，以第一个为准
  const enemyDbNames = Object.keys(ENEMY_DATABASE).sort((a, b) => b.length - a.length);
  for (const fullName of enemyDbNames) {
    if (enemyName.includes(fullName)) {
      console.info(`[敌人数据库] 包含匹配成功（数据）: "${enemyName}" 包含 "${fullName}"`);
      return ENEMY_DATABASE[fullName];
    }
  }

  // 4. 尝试别名包含匹配：遍历别名表，如果对手名包含某个别名，返回对应数据
  //    如果包含多个，以第一个为准
  const enemyAliases = Object.entries(NAME_ALIASES).sort((a, b) => b[0].length - a[0].length);
  for (const [alias, fullName] of enemyAliases) {
    if (enemyName.includes(alias) && fullName in ENEMY_DATABASE) {
      console.info(`[敌人数据库] 别名包含匹配成功（数据）: "${enemyName}" 包含别名 "${alias}" -> "${fullName}"`);
      return ENEMY_DATABASE[fullName];
    }
  }

  // 5. 都没匹配到，返回null
  console.warn(`[敌人数据库] 未找到数据匹配: "${enemyName}"`);
  return null;
}

/**
 * 根据对手名称获取完整名称（支持包含匹配）
 * @param enemyName 对手名称（可以是全名、部分名称或包含多个角色的复合名称）
 * @returns 完整名称，如果不存在则返回原名称
 */
export function resolveEnemyName(enemyName: string): string {
  // 1. 先尝试精确匹配（对手名刚好是某个数据库全名）
  if (enemyName in ENEMY_DATABASE) {
    return enemyName;
  }

  // 2. 先尝试精确别名匹配（避免短名包含匹配误判，如“雪莉”误命中“雪”）
  if (enemyName in NAME_ALIASES) {
    const fullName = NAME_ALIASES[enemyName];
    if (fullName in ENEMY_DATABASE) {
      return fullName;
    }
  }

  // 3. 尝试包含匹配：遍历数据库全名，如果对手名包含某个全名，返回该全名
  //    如果包含多个，以第一个为准
  const enemyDbNames = Object.keys(ENEMY_DATABASE).sort((a, b) => b.length - a.length);
  for (const fullName of enemyDbNames) {
    if (enemyName.includes(fullName)) {
      console.info(`[敌人数据库] 包含匹配成功: "${enemyName}" 包含 "${fullName}"`);
      return fullName;
    }
  }

  // 4. 尝试别名包含匹配：遍历别名表，如果对手名包含某个别名，返回对应全名
  //    如果包含多个，以第一个为准
  const enemyAliases = Object.entries(NAME_ALIASES).sort((a, b) => b[0].length - a[0].length);
  for (const [alias, fullName] of enemyAliases) {
    if (enemyName.includes(alias) && fullName in ENEMY_DATABASE) {
      console.info(`[敌人数据库] 别名包含匹配成功: "${enemyName}" 包含别名 "${alias}" -> "${fullName}"`);
      return fullName;
    }
  }

  // 5. 都没匹配到，返回原名
  console.warn(`[敌人数据库] 未找到匹配: "${enemyName}"，返回原名`);
  return enemyName;
}

/**
 * 检查是否存在指定名称的敌人数据（支持模糊匹配）
 * @param enemyName 对手名称
 * @returns 是否存在
 */
export function hasEnemyData(enemyName: string): boolean {
  return getEnemyMvuData(enemyName) !== null;
}
